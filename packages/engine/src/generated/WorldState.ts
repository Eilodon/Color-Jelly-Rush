/**
 * AUTO-GENERATED by EIDOLON-V GENESIS - DO NOT EDIT MANUALLY
 * Generated: 2026-02-05T10:01:25.137Z
 * Source: packages/engine/scripts/schema.config.js
 */

export const MAX_ENTITIES = 10000;

export interface IWorldConfig {
    maxEntities?: number;
}

export class WorldState {
    public readonly maxEntities: number;
    
    // Component Buffers
    public readonly transform: ArrayBuffer;
    public readonly transformView: DataView;
    public readonly physics: ArrayBuffer;
    public readonly physicsView: DataView;
    public readonly pigment: ArrayBuffer;
    public readonly pigmentView: DataView;
    public readonly stats: ArrayBuffer;
    public readonly statsView: DataView;
    public readonly input: ArrayBuffer;
    public readonly inputView: DataView;
    public readonly skill: ArrayBuffer;
    public readonly skillView: DataView;
    public readonly config: ArrayBuffer;
    public readonly configView: DataView;
    public readonly projectile: ArrayBuffer;
    public readonly projectileView: DataView;
    public readonly tattoo: ArrayBuffer;
    public readonly tattooView: DataView;

    constructor(config?: IWorldConfig) {
        this.maxEntities = config?.maxEntities ?? MAX_ENTITIES;
        
        // Allocate Buffers
        this.transform = new ArrayBuffer(this.maxEntities * 32);
        this.transformView = new DataView(this.transform);
        this.physics = new ArrayBuffer(this.maxEntities * 32);
        this.physicsView = new DataView(this.physics);
        this.pigment = new ArrayBuffer(this.maxEntities * 32);
        this.pigmentView = new DataView(this.pigment);
        this.stats = new ArrayBuffer(this.maxEntities * 32);
        this.statsView = new DataView(this.stats);
        this.input = new ArrayBuffer(this.maxEntities * 16);
        this.inputView = new DataView(this.input);
        this.skill = new ArrayBuffer(this.maxEntities * 16);
        this.skillView = new DataView(this.skill);
        this.config = new ArrayBuffer(this.maxEntities * 32);
        this.configView = new DataView(this.config);
        this.projectile = new ArrayBuffer(this.maxEntities * 16);
        this.projectileView = new DataView(this.projectile);
        this.tattoo = new ArrayBuffer(this.maxEntities * 16);
        this.tattooView = new DataView(this.tattoo);
    }

    /**
     * Reset all component data to zero
     */
    reset(): void {
        new Uint8Array(this.transform).fill(0);
        new Uint8Array(this.physics).fill(0);
        new Uint8Array(this.pigment).fill(0);
        new Uint8Array(this.stats).fill(0);
        new Uint8Array(this.input).fill(0);
        new Uint8Array(this.skill).fill(0);
        new Uint8Array(this.config).fill(0);
        new Uint8Array(this.projectile).fill(0);
        new Uint8Array(this.tattoo).fill(0);
    }

    /**
     * Check if entity ID is valid
     */
    isValidEntityId(id: number): boolean {
        return id >= 0 && id < this.maxEntities;
    }
}
